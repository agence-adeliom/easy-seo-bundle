<?php

namespace Adeliom\EasySeoBundle\Services;

use Symfony\Component\Routing\Generator\UrlGeneratorInterface;

class BreadcrumbCollection
{
    /**
     * @var array
     */
    protected array $items = [];

    /**
     * @var UrlGeneratorInterface
     */
    protected UrlGeneratorInterface $generator;

    /**
     * Adds new simple breadcrumb item. Leave target empty to create a breadcrumb item without a link.
     */
    public function addSimpleItem(string $linkName, string $target = null, ?object $object = null): void
    {
        $this->items[] = ['linkName' => $linkName, 'target' => $target, 'object' => $object];
    }

    /**
     * Adds new breadcrumb item where target is being generated by the url generator.
     */
    public function addRouteItem(string $linkName, array $route, ?object $object = null): void
    {
        $url = isset($route['params']) ? $this->generator->generate($route['route'], $route['params']) :
            $this->generator->generate($route['route']);

        $this->addSimpleItem($linkName, $url, $object);
    }

    /**
     * Return all Breadcrumbs.
     */
    public function getItems(): array
    {
        return $this->items;
    }

    public function setGenerator(UrlGeneratorInterface $generator): void
    {
        $this->generator = $generator;
    }
}
